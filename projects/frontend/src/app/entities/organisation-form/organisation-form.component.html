<form [formGroup]="organisationForm">
  <div class="row">
    <div class="col-8">
      <label class="section-text pb-3">Company info</label>

      <div class="mb-0 pb-0 fv-row fv-plugins-icon-container pb-2">
        <div class="d-flex gap-3">

          <app-input class="row d-flex w-100 pe-2 pt-0 mx-1" [label]="'labels.organisationName'" [placeholder]="''"
                     formControlName="organisationName"
                     [isInvalid]="organisationForm.controls.organisationName.invalid
                     && (organisationForm.controls.organisationName.dirty || organisationForm.controls.organisationName.touched)">
          </app-input>

          <app-input class="row d-flex w-100 pe-2 pt-0 mx-1" [label]="'labels.organisationLegalEntity'"
                     [placeholder]="''"
                     formControlName="organisationLegalEntity"
                     [isInvalid]="organisationForm.controls.organisationLegalEntity.invalid
                     && (organisationForm.controls.organisationLegalEntity.dirty || organisationForm.controls.organisationLegalEntity.touched)">
          </app-input>
        </div>

        <div class="d-flex"
             [ngClass]="{'justify-content-end': organisationForm.controls.organisationLegalEntity.invalid && (organisationForm.controls.organisationLegalEntity.dirty || organisationForm.controls.organisationLegalEntity.touched)}">
          <div
            *ngIf="organisationForm.controls.organisationName.invalid && (organisationForm.controls.organisationName.dirty || organisationForm.controls.organisationName.touched)"
            class="text-danger w-50">
            <div *ngIf="organisationForm.controls.organisationName.errors.required">The field Organisation Name is
              mandatory.
            </div>
            <div *ngIf="organisationForm.controls.organisationName.errors.pattern">The field Organisation Name accepts
              only letters.
            </div>
          </div>
          <div
            *ngIf="organisationForm.controls.organisationLegalEntity.invalid && (organisationForm.controls.organisationLegalEntity.dirty || organisationForm.controls.organisationLegalEntity.touched)"
            class="text-danger w-50">
            <div *ngIf="organisationForm.controls.organisationLegalEntity.errors.required">The field Organisation Legal
              Entity is mandatory.
            </div>
            <div *ngIf="organisationForm.controls.organisationLegalEntity.errors.pattern">The field Organisation Legal
              Entity accepts only letters.
            </div>
          </div>
        </div>

      </div>

      <div class="mb-0 fv-row fv-plugins-icon-container pb-2">
        <div class="d-flex gap-3">
          <app-select formControlName="mainContactPerson" [label]="'labels.mainContactPerson'"
                      class="row d-flex pe-2 pt-0 mx-1 w-100" [options]="mainContactPersonSelector">
          </app-select>
        </div>
      </div>

      <div class="mb-0 fv-row fv-plugins-icon-container pb-2">
        <div class="d-flex gap-3">

          <app-input class="row d-flex w-100 pe-2 pt-0 mx-1" [label]="'labels.contactEmail'" [placeholder]="''"
                     formControlName="contactEmail"
                     [isInvalid]="organisationForm.controls.contactEmail.invalid
                     && (organisationForm.controls.contactEmail.dirty || organisationForm.controls.contactEmail.touched)">
          </app-input>

        </div>

        <div
          *ngIf="organisationForm.controls.contactEmail.invalid && (organisationForm.controls.contactEmail.dirty || organisationForm.controls.contactEmail.touched)"
          class="text-danger w-50">
          <div *ngIf="organisationForm.controls.contactEmail.errors.required">The field Contact Email is
            mandatory.
          </div>
          <div *ngIf="organisationForm.controls.contactEmail.errors.email">The field Contact Email is invalid.
          </div>
        </div>

      </div>

      <div class="mb-0 fv-row fv-plugins-icon-container pb-2">
        <div class="d-flex gap-3">

          <app-input class="row d-flex w-100 pe-2 pt-0 mx-1" [label]="'labels.organisationAddress'" [placeholder]="''"
                     formControlName="organisationAddress"
                     [isInvalid]="organisationForm.controls.organisationAddress.invalid
                     && (organisationForm.controls.organisationAddress.dirty || organisationForm.controls.organisationAddress.touched)">
          </app-input>

        </div>

        <div
          *ngIf="organisationForm.controls.organisationAddress.invalid && (organisationForm.controls.organisationAddress.dirty || organisationForm.controls.organisationAddress.touched)"
          class="text-danger w-50">
          <div *ngIf="organisationForm.controls.organisationAddress.errors.required">The field Organisation Address is
            mandatory.
          </div>
        </div>
      </div>

      <label class="section-text pb-3">Address details</label>

      <div class="mb-0 pb-0 fv-row fv-plugins-icon-container pb-2">
        <div class="d-flex gap-3">

          <app-input class="row d-flex w-100 pe-2 pt-0 mx-1" [label]="'labels.street'" [placeholder]="''"
                     formControlName="street"
                     [isInvalid]="organisationForm.controls.street.invalid
                     && (organisationForm.controls.street.dirty || organisationForm.controls.street.touched)">
          </app-input>

          <app-input class="row d-flex w-100 pe-2 pt-0 mx-1" [label]="'labels.buildingName'" [placeholder]="''"
                     formControlName="buildingName">
          </app-input>

        </div>

        <div
          *ngIf="organisationForm.controls.street.invalid && (organisationForm.controls.street.dirty || organisationForm.controls.street.touched)"
          class="text-danger w-50">
          <div *ngIf="organisationForm.controls.street.errors.required">The field Street is
            mandatory.
          </div>
        </div>

      </div>

      <div class="mb-0 fv-row fv-plugins-icon-container pb-2">
        <div class="d-flex gap-3">
          <app-input class="row d-flex w-100 pe-2 pt-0 mx-1" [label]="'labels.zipCode'" [placeholder]="''"
                     formControlName="zipCode"
                     [isInvalid]="organisationForm.controls.zipCode.invalid
                     && (organisationForm.controls.zipCode.dirty || organisationForm.controls.zipCode.touched)">
          </app-input>

          <app-input class="row d-flex w-100 pe-2 pt-0 mx-1" [label]="'labels.city'" [placeholder]="''"
                     formControlName="city"
                     [isInvalid]="organisationForm.controls.city.invalid
                     && (organisationForm.controls.city.dirty || organisationForm.controls.city.touched)">
          </app-input>
        </div>

        <div class="d-flex"
             [ngClass]="{'justify-content-end': organisationForm.controls.city.invalid && (organisationForm.controls.city.dirty || organisationForm.controls.city.touched)}">
          <div
            *ngIf="organisationForm.controls.zipCode.invalid && (organisationForm.controls.zipCode.dirty || organisationForm.controls.zipCode.touched)"
            class="text-danger w-50">
            <div *ngIf="organisationForm.controls.zipCode.errors.required">The Zip Code is
              mandatory.
            </div>
            <div *ngIf="organisationForm.controls.zipCode.errors.pattern">The Zip Code accepts
              only numbers.
            </div>
          </div>
          <div
            *ngIf="organisationForm.controls.city.invalid && (organisationForm.controls.city.dirty || organisationForm.controls.city.touched)"
            class="text-danger w-50">
            <div *ngIf="organisationForm.controls.city.errors.required">The field City is mandatory.
            </div>
            <div *ngIf="organisationForm.controls.city.errors.pattern">The field City accepts only letters.
            </div>
          </div>
        </div>
      </div>

      <div class="mb-0 fv-row fv-plugins-icon-container pb-2">
        <div class="d-flex gap-3">

          <app-input class="row d-flex w-100 pe-2 pt-0 mx-1" [label]="'labels.region'" [placeholder]="''"
                     formControlName="region">
          </app-input>

          <app-select formControlName="country" [label]="'labels.country'" [placeholder]="''"
                      class="row d-flex pe-2 pt-0 mx-1 w-100" [options]="countries">
          </app-select>

        </div>
      </div>

      <div class="row g-3 justify-content-end pt-3 mb-0">

        <div class="col-xxl-2 col-md-3 col-sm-3">
          <app-button (click)="cancel.emit()" [name]="'buttons.save'" [btnColor]="btnColor.updateForm"></app-button>
        </div>

        <div class="col-md-3" *ngIf="isManagement">
          <app-button (click)="cancel.emit()" [name]="'buttons.cancel'" [btnColor]="btnColor.white"></app-button>
        </div>

      </div>


    </div>
    <div class="card col-4 rounded-2 px-4 image-container">
      <div class="card-body text-center  px-2 pt-2">

        <div class="image-input img-fluid image-input-empty image-input-outline image-input-placeholder mb-3 mt-12"
             data-kt-image-input="true">

          <div class="image-input-wrapper img-fluid w-150px h-150px"
               [style.background-image]="'url(' + (organisationForm.controls.avatar.value) + ')'">
          </div>

          <label class="btn btn-icon btn-circle btn-active-color-primary w-25px h-25px bg-body shadow"
                 data-kt-image-input-action="change" data-bs-toggle="tooltip" aria-label="Change avatar"
                 data-bs-original-title="Change avatar" data-kt-initialized="1">
            <i class="bi bi-pencil-fill fs-7"></i>

            <input type="file" name="avatar" accept=".png, .jpg, .jpeg">
            <input type="hidden" name="avatar_remove">

          </label>
        </div>

        <div class="pb-5 mt-3 fs-6">

          <div class="text-white text-start py-2 px-4 rounded-1 fw-medium full-name">
            {{ organisationForm.controls.fullOrganisationName.value }}
          </div>

          <div *ngIf="!isManagement" class="text-start fw-bold toolbar-title-text mt-3 fs-6 px-3">{{
            organisationForm.controls.role.value }}
          </div>

          <div class="text-start fs-7 text-black px-3 py-2">
            {{ "organisations.organisationsNameDescription" | translate }}
          </div>

        </div>
      </div>
    </div>
  </div>
</form>

<!--<div>-->
<!--  <label class="section-text pb-3">Roles of User / Organizations</label>-->

<!--  &lt;!&ndash; Botón para abrir el modal &ndash;&gt;-->
<!--  <div class="fv-row fv-plugins-icon-container px-1 pt-3">-->
<!--    <a class="btn btn-sm fw-bold border-0 px-0" data-bs-toggle="modal" data-bs-target="#kt_modal_create_organisation">-->
<!--      <span class="btn-label" [inlineSVG]="'./assets/media/icons/duotune/general/add-plus.svg'"></span>-->
<!--      <span class="a-link-color ps-3 fs-5 align-middle">{{ "buttons.addOrganization" | translate }}</span>-->
<!--    </a>-->
<!--  </div>-->

<!--  &lt;!&ndash; Modal &ndash;&gt;-->
<!--  <div class="modal fade custom-modal" id="kt_modal_create_organisation" tabindex="-1" role="dialog"-->
<!--       aria-labelledby="exampleModalLabel"-->
<!--       aria-hidden="true">-->
<!--    <div class="modal-dialog modal-dialog-centered" role="document">-->
<!--      <div class="modal-content">-->
<!--        <div class="modal-header px-9 py-6">-->
<!--          <label class="popover-title" id="ModalLabel">Add organization</label>-->
<!--          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>-->
<!--        </div>-->
<!--        <div class="modal-body pt-3 pb-5">-->

<!--          <label class="section-text">Roles of User</label>-->

<!--          <app-select class="row d-flex w-100 pe-2 pt-0 mx-1 salutation" [options]=""-->
<!--                      [placeholder]="'labels.addLanguage'"-->
<!--                      [label]="'labels.userRights'"-->
<!--                      formControlName="salutation">-->
<!--          </app-select>-->

<!--          <div class="col-8 d-flex py-6 px-4">-->

<!--            <ng-container>-->
<!--              <div class="fv-row w-50">-->
<!--                <ng-container *ngFor="let role of userRoles | slice: 0: 4">-->
<!--                  <ng-container *ngTemplateOutlet="toggle; context: { role }"></ng-container>-->
<!--                </ng-container>-->
<!--              </div>-->

<!--              <div class="fv-row w-50">-->
<!--                <ng-container *ngFor="let role of userRoles | slice: 4">-->
<!--                  <ng-container *ngTemplateOutlet="toggle; context: { role }"></ng-container>-->
<!--                </ng-container>-->
<!--              </div>-->

<!--            </ng-container>-->


<!--          </div>-->

<!--          <label class="section-text pb-3">Organizations</label>-->

<!--          <app-select class="row d-flex w-100 pe-2 pt-0 mx-1 salutation" [options]=""-->
<!--                      [placeholder]="'labels.addLanguage'"-->
<!--                      [label]="'labels.selectOrganisation'"-->
<!--                      formControlName="salutation">-->
<!--          </app-select>-->

<!--        </div>-->
<!--        <div class="modal-footer py-3">-->
<!--          <app-button class="px-0" data-bs-dismiss="modal" id="piecesButton" [name]="'buttons.cancel'"-->
<!--                      [btnColor]="btnColor.filterButtonWhiteBg"></app-button>-->
<!--          <app-button class="px-0" id="palletsButton" [name]="'buttons.create'"-->
<!--                      [btnColor]="btnColor.filterButton"></app-button>-->
<!--        </div>-->
<!--      </div>-->
<!--    </div>-->
<!--  </div>-->
<!--</div>-->

<ng-template #toggle let-role="role">
  <app-checkbox class="col-lg-8 pb-1" [label]="role.name"
                [checked]="organisationForm.controls.roles.value.includes(role.value)">
  </app-checkbox>
</ng-template>
