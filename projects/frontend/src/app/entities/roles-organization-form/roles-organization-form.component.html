<form [formGroup]="organisationForm">
  <label class="section-text">Organization hierarchy</label>
  <div class="mb-0 fv-row fv-plugins-icon-container pb-2">
    <div class="d-flex gap-3">

      <app-switch class="width-company-is-parent ps-sm-6" [label]="'labels.companyIsParent'" [bgColor]="bgColor.gray">
      </app-switch>
      <app-select class="row d-flex w-100 pe-2 pt-0 mx-1 salutation" [options]="parentOrganization" formControlName="parentOrganization"
                  [label]="'labels.parentOrganization'">
      </app-select>

      <app-select class="row d-flex w-100 pe-2 pt-0 mx-1 salutation" [options]="organizationIs" formControlName="organizationABC"
                  [label]="'labels.organizationABC'">
      </app-select>

    </div>
  </div>

  <div class="row pt-3 pb-5">

    <div class="col-5 px-4">
      <label class="section-text pb-3">Company activities</label>
      <div class="d-flex">
      <ng-container>
        <div class="fv-row w-50 ps-sm-6">
          <ng-container *ngFor="let role of companyActivities | slice: 0: 2">
            <ng-container *ngTemplateOutlet="toggle; context: { role }"></ng-container>
          </ng-container>
        </div>

        <div class="fv-row w-50">
          <ng-container *ngFor="let role of companyActivities | slice: 2">
            <ng-container *ngTemplateOutlet="toggle; context: { role }"></ng-container>
          </ng-container>
        </div>
      </ng-container>
      </div>

    </div>

    <div class="col-6 px-4">
      <label class="section-text pb-3">Company roles</label>
      <div class="d-flex">
        <ng-container>
          <div class="fv-row w-50 ps-sm-6">
            <ng-container *ngFor="let role of companyRoles | slice: 0: 6">
              <ng-container *ngTemplateOutlet="toggle; context: { role }"></ng-container>
            </ng-container>
          </div>

          <div class="fv-row w-50">
            <ng-container *ngFor="let role of companyRoles | slice: 6">
              <ng-container *ngTemplateOutlet="toggle; context: { role }"></ng-container>
            </ng-container>
          </div>
        </ng-container>
      </div>

    </div>

  </div>

  <label class="section-text">Subsidiaries</label>
  <div class="mb-0 fv-row fv-plugins-icon-container pb-2">
    <div class="d-flex">

      <app-select class="row d-flex w-100 pe-2 pt-0 mx-1 salutation" [options]="subsidiary" [placeholder]="''" formControlName="subsidiary"
                  [label]="'labels.subsidiary'">
      </app-select>
      <app-switch class="w-50 ps-sm-2 ps-xxl-7" [label]="'labels.consolidateAddress'" [bgColor]="bgColor.gray">
      </app-switch>
      <app-switch class="w-50 ps-sm-2 " [label]="'labels.parentUsers'" [bgColor]="bgColor.gray">
      </app-switch>

    </div>
  </div>

  <div class="row g-3 justify-content-end pt-3 mb-0">

    <div class="col-md-2">
      <app-button (click)="save.emit()" [name]="'buttons.save'" [btnColor]="btnColor.blue" [btnFontSizing]="btnFontSize"></app-button>
    </div>

    <div class="col-md-2" *ngIf="isSettings">
      <app-button (click)="cancel.emit()" [name]="'buttons.cancel'" [btnColor]="btnColor.white"></app-button>
    </div>

  </div>
</form>

<div class="fv-row fv-plugins-icon-container px-1 pt-3">
  <a class="btn btn-sm fw-bold border-0 px-0" data-bs-toggle="modal" data-bs-target="#kt_modal_subsidiary_app">
    <span class="btn-label" [inlineSVG]="'./assets/media/icons/duotune/general/add-plus.svg'"></span>
    <span class="a-link-color ps-3 fs-5 align-middle">{{ "buttons.addSubsidiary" | translate }}</span>
  </a>
</div>

<ng-template #toggle let-role="role">
  <app-switch class="col-lg-12 pb-1" [label]="role.name" [bgColor]="bgColor.gray"
              [checked]="organisationForm.controls.roles.value.includes(role.value)">
  </app-switch>
</ng-template>
